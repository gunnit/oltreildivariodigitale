const ValidationMessages={it:{required:"Questo campo è obbligatorio",email:"Inserisci un indirizzo email valido (es: nome@azienda.it)",phone:"Inserisci un numero di telefono valido (es: +39 123 456 7890)",number:"Inserisci un numero valido",min:"Il valore deve essere almeno {min}",max:"Il valore non può superare {max}",minLength:"Inserisci almeno {min} caratteri",maxLength:"Non superare i {max} caratteri",employees:"Inserisci un numero di dipendenti valido (1-10000)",revenue:"Inserisci un fatturato annuo realistico",percentage:"Inserisci una percentuale tra 0 e 100",hours:"Inserisci un numero di ore valido (0-24)",investment:"Inserisci un importo di investimento valido",companyName:"Il nome dell'azienda deve contenere almeno 2 caratteri",sector:"Seleziona un settore dalla lista",success:"Campo compilato correttamente",calculating:"Calcolo in corso...",calculationComplete:"Calcolo completato con successo!"},en:{required:"This field is required",email:"Please enter a valid email address (e.g., name@company.com)",phone:"Please enter a valid phone number (e.g., +39 123 456 7890)",number:"Please enter a valid number",min:"Value must be at least {min}",max:"Value cannot exceed {max}",minLength:"Please enter at least {min} characters",maxLength:"Maximum {max} characters allowed",employees:"Enter a valid number of employees (1-10000)",revenue:"Enter a realistic annual revenue",percentage:"Enter a percentage between 0 and 100",hours:"Enter a valid number of hours (0-24)",investment:"Enter a valid investment amount",companyName:"Company name must be at least 2 characters",sector:"Please select a sector from the list",success:"Field completed successfully",calculating:"Calculating...",calculationComplete:"Calculation completed successfully!"}};class EnhancedValidator{constructor(e,t="it"){this.form=e,this.lang=t,this.messages=ValidationMessages[t],this.validationRules=new Map,this.setupValidation()}setupValidation(){this.validationRules.set("email",{pattern:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:this.messages.email}),this.validationRules.set("phone",{pattern:/^[\+]?[(]?[0-9]{1,4}[)]?[-\s\.]?[(]?[0-9]{1,4}[)]?[-\s\.]?[0-9]{1,9}$/,message:this.messages.phone}),this.validationRules.set("employees",{min:1,max:1e4,type:"number",message:this.messages.employees}),this.validationRules.set("revenue",{min:1e4,max:1e9,type:"number",message:this.messages.revenue}),this.validationRules.set("percentage",{min:0,max:100,type:"number",message:this.messages.percentage}),this.attachEventListeners()}attachEventListeners(){this.form.querySelectorAll("input, select, textarea").forEach(e=>{let t=e.parentElement.querySelector(".validation-message");t||(t=document.createElement("div"),t.className="validation-message",e.parentElement.appendChild(t)),e.addEventListener("blur",()=>this.validateField(e)),e.addEventListener("input",()=>{e.classList.contains("error")&&this.validateField(e)})})}validateField(e){const t=e.parentElement.querySelector(".validation-message");if(e.classList.remove("error","success"),t.textContent="",t.classList.remove("show","error","success"),e.hasAttribute("required")&&!e.value.trim())return this.showError(e,this.messages.required),!1;if(!e.value.trim())return!0;const n=e.getAttribute("data-validation")||e.type,a=this.validationRules.get(n);if(a){if(a.pattern&&!a.pattern.test(e.value))return this.showError(e,a.message),!1;if("number"===a.type){const t=parseFloat(e.value);if(isNaN(t))return this.showError(e,this.messages.number),!1;if(void 0!==a.min&&t<a.min)return this.showError(e,this.messages.min.replace("{min}",a.min)),!1;if(void 0!==a.max&&t>a.max)return this.showError(e,this.messages.max.replace("{max}",a.max)),!1}}if(e.hasAttribute("minlength")){const t=parseInt(e.getAttribute("minlength"));if(e.value.length<t)return this.showError(e,this.messages.minLength.replace("{min}",t)),!1}if(e.hasAttribute("maxlength")){const t=parseInt(e.getAttribute("maxlength"));if(e.value.length>t)return this.showError(e,this.messages.maxLength.replace("{max}",t)),!1}return this.showSuccess(e),!0}showError(e,t){e.classList.add("error"),e.classList.remove("success");const n=e.parentElement.querySelector(".validation-message");n.textContent=t,n.classList.add("show","error"),n.classList.remove("success"),e.setAttribute("aria-invalid","true"),e.setAttribute("aria-describedby",n.id||this.generateErrorId(e)),e.classList.add("shake"),setTimeout(()=>e.classList.remove("shake"),500)}showSuccess(e){e.classList.add("success"),e.classList.remove("error");const t=e.parentElement.querySelector(".validation-message");t.textContent="✓",t.classList.add("show","success"),t.classList.remove("error"),e.setAttribute("aria-invalid","false")}generateErrorId(e){const t=`error-${e.name||e.id||Math.random().toString(36).substr(2,9)}`;return e.parentElement.querySelector(".validation-message").id=t,t}validateStep(e){const t=e.querySelectorAll("input, select, textarea");let n=!0;return t.forEach(e=>{this.validateField(e)||(n=!1)}),n}showNotification(e,t="info"){const n=document.createElement("div");n.className=`validation-notification ${t}`,n.textContent=e,this.form.appendChild(n),setTimeout(()=>n.classList.add("show"),10),setTimeout(()=>{n.classList.remove("show"),setTimeout(()=>n.remove(),300)},3e3)}}const validationStyles="\n<style>\n.validation-message {\n    font-size: 0.875rem;\n    margin-top: 0.25rem;\n    opacity: 0;\n    transform: translateY(-5px);\n    transition: all 0.3s ease;\n    position: relative;\n}\n\n.validation-message.show {\n    opacity: 1;\n    transform: translateY(0);\n}\n\n.validation-message.error {\n    color: #c0392b;\n}\n\n.validation-message.success {\n    color: #27ae60;\n}\n\ninput.error, select.error, textarea.error {\n    border-color: #c0392b !important;\n    background-color: rgba(192, 57, 43, 0.05);\n}\n\ninput.success, select.success, textarea.success {\n    border-color: #27ae60 !important;\n    background-color: rgba(39, 174, 96, 0.05);\n}\n\n@keyframes shake {\n    0%, 100% { transform: translateX(0); }\n    10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }\n    20%, 40%, 60%, 80% { transform: translateX(5px); }\n}\n\n.shake {\n    animation: shake 0.5s;\n}\n\n.validation-notification {\n    position: fixed;\n    top: 80px;\n    right: 20px;\n    padding: 1rem 1.5rem;\n    border-radius: 8px;\n    background: white;\n    box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n    z-index: 1000;\n    opacity: 0;\n    transform: translateX(100%);\n    transition: all 0.3s ease;\n    max-width: 300px;\n}\n\n.validation-notification.show {\n    opacity: 1;\n    transform: translateX(0);\n}\n\n.validation-notification.info {\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n}\n\n.validation-notification.success {\n    background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);\n    color: #1a2332;\n}\n\n.validation-notification.error {\n    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);\n    color: white;\n}\n\n/* Tooltip for field hints */\n.field-hint {\n    position: relative;\n    display: inline-block;\n    margin-left: 0.5rem;\n    cursor: help;\n}\n\n.field-hint::before {\n    content: '?';\n    display: inline-block;\n    width: 18px;\n    height: 18px;\n    border-radius: 50%;\n    background: #e0e0e0;\n    color: #666;\n    text-align: center;\n    line-height: 18px;\n    font-size: 12px;\n    font-weight: bold;\n}\n\n.field-hint .hint-text {\n    position: absolute;\n    bottom: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n    background: #333;\n    color: white;\n    padding: 0.5rem;\n    border-radius: 4px;\n    font-size: 0.875rem;\n    white-space: nowrap;\n    opacity: 0;\n    pointer-events: none;\n    transition: opacity 0.3s;\n    margin-bottom: 0.5rem;\n}\n\n.field-hint:hover .hint-text {\n    opacity: 1;\n}\n</style>\n";if(!document.getElementById("validation-styles")){const e=document.createElement("div");e.id="validation-styles",e.innerHTML=validationStyles,document.head.appendChild(e.firstChild)}"undefined"!=typeof module&&module.exports&&(module.exports=EnhancedValidator);